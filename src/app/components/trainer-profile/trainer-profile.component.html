<div class="trainer-profile container my-4 p-4 rounded shadow-sm bg-surface">
  <div class="cover-photo position-relative mb-4">
    <img [src]="profile?.coverImage || 'assets/images/shared/default-cover-1200x200.png'" class="img-fluid w-100 rounded" alt="cover">
    <div class="profile-photo position-absolute bottom-0 start-50 translate-middle">
      <img [src]="profile?.image || 'https://avatar.iran.liara.run/username?username=' + username" class="rounded-circle border border-3 border-white" width="150" height="150" alt="avatar">
    </div>
  </div>

  <div class="text-center mt-5">
    <h3>{{ username || profile?.firstname + ' ' + profile?.lastname || 'N/A' }}</h3>
    <p class="text-muted">{{ profile?.headline }}</p>
  </div>

  <form *ngIf="profileForm" [formGroup]="profileForm" (ngSubmit)="onSave()">
    <div class="row g-3">
      <!-- Headline -->
      <div class="col-md-12">
        <label class="form-label">Headline</label>
        <input type="text" formControlName="headline" class="form-control" maxlength="100">
        <small class="text-muted">{{ getCharCount('headline') }}/100 characters</small>
      </div>

      <!-- Bio -->
      <div class="col-md-12">
        <label class="form-label">Bio</label>
        <textarea formControlName="bio" class="form-control" rows="4" maxlength="1000"></textarea>
        <small class="text-muted">{{ getCharCount('bio') }}/1000 characters</small>
      </div>

      <!-- Specialties -->
      <div class="col-md-6">
        <label class="form-label">Specialties</label>
        <div class="tag-input">
          <div class="d-flex flex-wrap gap-2 mb-2">
            <span *ngFor="let s of specialties.controls; let i = index"
                  class="badge bg-primary">
              {{ s.value }} <i class="fa fa-times ms-2" (click)="removeTag(specialties, i)"></i>
            </span>
          </div>
          <input type="text" class="form-control" placeholder="Press Enter or comma to add"
                 (keydown)="addTag(specialties, $event)">
        </div>
      </div>

      <!-- Languages -->
      <div class="col-md-6">
        <label class="form-label">Languages</label>
        <div class="tag-input">
          <div class="d-flex flex-wrap gap-2 mb-2">
            <span *ngFor="let l of languages.controls; let i = index"
                  class="badge bg-secondary">
              {{ l.value }} <i class="fa fa-times ms-2" (click)="removeTag(languages, i)"></i>
            </span>
          </div>
          <input type="text" class="form-control" placeholder="Press Enter or comma to add"
                 (keydown)="addTag(languages, $event)">
        </div>
      </div>

      <!-- Hourly Rate -->
      <div class="col-md-6">
        <label class="form-label">Rate</label>
        <div class="input-group">
          <input type="text" formControlName="hourlyRateAmount" class="form-control" placeholder="Amount">
          <select class="form-select" formControlName="hourlyRateCurrency">
            <option *ngFor="let c of currencies" [value]="c">{{ c }}</option>
          </select>
          <select class="form-select" formControlName="hourlyRateUnit">
            <option *ngFor="let u of rateUnits" [value]="u">per {{ u }}</option>
          </select>
        </div>
        <div *ngIf="profileForm.get('hourlyRateAmount')?.invalid && profileForm.get('hourlyRateAmount')?.touched"
             class="text-danger small mt-1">Invalid amount</div>
      </div>

      <!-- Availability -->
      <div class="col-md-6">
        <label class="form-label">Availability</label>
        <input type="text" formControlName="availability" class="form-control" maxlength="150">
        <small class="text-muted">{{ getCharCount('availability') }}/150 characters</small>
      </div>

      <!-- URLs -->
      <div class="col-md-4">
        <label class="form-label">Website</label>
        <input type="url" formControlName="website" class="form-control">
        <div *ngIf="profileForm.get('website')?.invalid && profileForm.get('website')?.touched"
             class="text-danger small mt-1">Invalid URL</div>
      </div>
      <div class="col-md-4">
        <label class="form-label">LinkedIn</label>
        <input type="url" formControlName="linkedIn" class="form-control">
        <div *ngIf="profileForm.get('linkedIn')?.invalid && profileForm.get('linkedIn')?.touched"
             class="text-danger small mt-1">Invalid URL</div>
      </div>
      <div class="col-md-4">
        <label class="form-label">YouTube</label>
        <input type="url" formControlName="youtube" class="form-control">
        <div *ngIf="profileForm.get('youtube')?.invalid && profileForm.get('youtube')?.touched"
             class="text-danger small mt-1">Invalid URL</div>
      </div>

      <!-- Public profile -->
      <div class="col-12 form-check mt-3">
        <input type="checkbox" formControlName="isPublicProfile" class="form-check-input" id="publicCheck">
        <label class="form-check-label" for="publicCheck">&nbsp;Publicly visible profile</label>
      </div>

      <!-- Submit -->
      <div class="text-end mt-4">
        <button type="submit" class="btn btn-primary px-4" [disabled]="profileForm.invalid">
          <i class="fa fa-save me-2"></i>Save
        </button>
      </div>
    </div>
  </form>
</div>
