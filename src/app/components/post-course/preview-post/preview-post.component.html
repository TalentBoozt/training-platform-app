<div class="form-card-1 animate-fade-in">
  <div class="section-header">
    <h5>Final Course Preview</h5>
    <div class="action-row">
      <button *ngIf="isUpdateId" id="TP_PP_NewBatch" class="btn-fill btn-f-1 px-4"
        (click)="updateWithNewBatch()">Publish New Batch</button>
      <button id="TP_PP_AdCourse" class="btn-fill btn-f-3 px-5" (click)="addCourse()">
        {{isUpdateId ? 'Update & Sync' : 'Go Live & Publish'}}
      </button>
    </div>
  </div>

  <div class="magazine-preview" *ngFor="let c of selectedCourse">
    <div *ngIf="!isNotFound">

      <!-- Hero Section -->
      <section class="hero-section mb-5">
        <div class="hero-content">
          <h1 class="course-title">{{c?.name}}</h1>
          <p class="course-overview">{{c?.overview}}</p>
          <div class="lecturers">
            <span>{{c?.lecturer}}</span>
          </div>
        </div>
      </section>

      <!-- High Fidelity Details Grid -->
      <section class="details-grid mb-5">
        <div class="detail-card">
          <span class="tag">Satisfaction</span>
          <div class="value">
            <i class="material-icons star">star</i>
            <span>{{c?.rating}} / 5.0</span>
          </div>
        </div>
        <div class="detail-card">
          <span class="tag">Language</span>
          <div class="value">
            <i class="material-icons">language</i>
            <span>{{c?.language}}</span>
          </div>
        </div>
        <div class="detail-card">
          <span class="tag">Curriculum</span>
          <div class="value">
            <i class="material-icons">school</i>
            <span>{{c?.modules.length || '0'}} Modules</span>
          </div>
        </div>
        <div class="detail-card">
          <span class="tag">Difficulty</span>
          <div class="value">
            <i class="material-icons">bar_chart</i>
            <span>{{c?.level}}</span>
          </div>
        </div>
        <div class="detail-card">
          <span class="tag">Commitment</span>
          <div class="value">
            <i class="material-icons">timer</i>
            <span>{{c?.duration}}</span>
          </div>
        </div>
      </section>

      <!-- Main Content Area -->
      <section class="content-section">
        <div class="main-content">
          <div class="section-title">Core Skills Gained</div>
          <div class="skills-cloud">
            <span class="skill-chip" *ngFor="let s of c?.skills">{{s}}</span>
          </div>

          <div class="section-title">Course Description</div>
          <div class="description-body" [innerHTML]="sanitizeHTML(c?.description)"></div>
        </div>

        <!-- Sticky Sidebar Preview -->
        <aside class="sidebar-actions">
          <div class="cta-card">
            <div class="price-display">
              <small>From</small>
              <span>{{selectedCurrency || '$'}}{{selectedPrice || '0.00'}}</span>
            </div>
            <button class="premium-btn">Enrollment Preview</button>
            <ul>
              <li><i class="material-icons">verified</i> Full Lifetime Access</li>
              <li><i class="material-icons">description</i> Course Materials</li>
              <li><i class="material-icons">workspace_premium</i> Certificate of Completion</li>
            </ul>
          </div>
        </aside>
      </section>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="isNotFound" class="not-found-state">
    <i class="material-icons">visibility_off</i>
    <h3>Preview Not Available</h3>
    <p>Please ensure you've completed all previous steps and saved your changes to generate a high-fidelity preview.</p>
    <button class="btn-fill btn-f-2 mt-3 px-4">Refresh Workspace</button>
  </div>
</div>